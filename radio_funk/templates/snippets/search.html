{% load static i18n model_name %}

{% if query %}
  <p class="text-xl">Returned <strong class="font-black">{{count}} results</strong> for <strong class="font-black">{{query}}</strong></p>
  {% if count > 0 %}
    <!-- TODO: all models come below here in their respective styles -->
    <div class="relative md:flex md:items-start md:space-x-4 space-y-4 w-full h-min py-2">
      {% if object_list %}
      <div class="flex-col w-full h-2/3 md:w-1/2">
        <h2 class="font-black text-2xl uppercase">top results</h2>
        {% for obj in object_list %}
          {% with obj|model_name as klass %}
            {% if klass == "User" %}
            <div class="mt-2 rounded-md w-full h-min bg-gradient-to-b shadow-md hover:shadow-lg dark:from-gray-800 dark:to-gray-700 from-gray-50 to-gray-200 p-4 duration-300">
              <div class="items-center flex justify-between">
                <div class="flex items-center space-x-2">
                  <img src="{% if obj.image.thumbnail %}{{obj.image.thumbnail.url}}{% else %}{% static 'images/favicons.svg' %}{% endif %}" alt="{{obj.name|title|truncatechars:10}} Cover Image" class="object-contain w-10 h-10 rounded-full aspect-[1/1]">
                  <div class="flex-col text-left w-2/3 truncate leading-none">
                    <h2 class="font-black text-xl leading-none">{% if obj.name %}{{obj.name|upper|truncatechars:18}}{% else %}{{obj.username|title}}{% endif %} <sup class="text-green-400 leading-none">A</sup></h2>
                    <p class="text-md leading-none uppercase">popular artist</p>
                  </div>
                </div>
              </div>
            </div>
            {% elif klass == "Stations" %}
            <div li-index="{{r.id}}" onclick="clicked(this)" class="mt-2 rounded-md w-full h-min bg-gradient-to-b shadow-md hover:shadow-lg dark:from-gray-800 dark:to-gray-700 from-gray-50 to-gray-200 p-4 duration-300">
              <div class="items-center flex justify-between">
                <div class="flex items-center space-x-2">
                  <img src="{{obj.logo.thumbnail.url}}" alt="{{obj.name|title|truncatechars:10}} Cover Image" class="object-contain w-10 h-10 rounded-lg">
                  <div class="flex-col text-left w-2/3 truncate leading-none">
                    <h2 class="font-black text-xl leading-none">{{obj.name|upper|truncatechars:15}} <sup class="text-primary leading-none">R</sup></h2>
                    <p class="font-serif4 text-md leading-none">{{obj.description|safe|title|truncatechars:25}}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}
          {% endwith %}
        {% empty %}
        <div class="rounded-md w-full h-min bg-gradient-to-b shadow-md hover:shadow-lg dark:from-gray-800 dark:to-gray-700 from-gray-50 to-gray-200 p-4 duration-300">
          No Result
        </div>
        {% endfor %}
      </div>
      {% endif %}
      {% if episodes.count > 0 %}
      <div class="flex-col w-full h-2/3 space-y-2 md:w-1/2">
          <div class="flex items-center justify-between">
            <h2 class="font-black uppercase text-2xl">Episodes</h2>
            <a href="javascript:;" class="dark:text-primary text-xl uppercase font-black">view more</a>
          </div>
          {% for obj in episodes %}
            <div class="rounded-md w-full h-min bg-gradient-to-b shadow-md hover:shadow-lg dark:from-gray-800 dark:to-gray-700 from-gray-50 to-gray-200 p-4 duration-300">
              <div class="items-center flex justify-between">
                <div class="flex items-center space-x-2">
                  <img src="{% if obj.image.thumbnail %}{{obj.image.thumbnail.url}}{% else %}{% static 'images/favicons.svg' %}{% endif %}" alt="{{obj.name|title|truncatechars:10}} Cover Image" class="object-contain w-10 h-10 rounded-lg">
                  <div class="flex-col text-left w-2/3 truncate leading-none">
                    <h2 class="font-black text-xl leading-none">{{obj.name|upper|truncatechars:16}} <sup class="text-blue-400 leading-none">E</sup></h2>
                    <p class="font-serif4 text-md leading-none">{{obj.description|safe|title|truncatechars:25}}</p>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
        {% endif %}
    </div>


    {% if stations.count > 0 %}
    <h2 class="font-black text-2xl uppercase">popular stations</h2>
    <div class="flex items-center overflow-x-auto w-full h-min py-2 space-x-4">
      {% for r in stations %}
      <div li-index="{{r.id}}" onclick="clicked(this)" class="rounded-md aspect-[1/1] w-48 flex-none bg-blue-400 uppercase font-2xl">
        <p class="block self-center mx-auto">{{r.name|title}}</p>
      </div>
      {% endfor %}
    </div>
    {% endif %}
  {% else %}
    <div class="max-h-[calc(100%_-_18rem)] w-full items-center flex-col space-y-2">
      <svg class="w-[27%] h-[27%] block mx-auto fill-current dark:text-gray-500 text-gray-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2h-1.528A6 6 0 004 9.528V4z"></path><path fill-rule="evenodd" d="M8 10a4 4 0 00-3.446 6.032l-1.261 1.26a1 1 0 101.414 1.415l1.261-1.261A4 4 0 108 10zm-2 4a2 2 0 114 0 2 2 0 01-4 0z" clip-rule="evenodd"></path></svg>
      <h2 class="dark:text-gray-500 text-gray-500 font-black text-6xl text-center">No result</h2>
    </div>
  {% endif %}
{% else %}
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-5 gap-4">
    {% for obj in genres %}
      <div class="overflow-hidden relative w-full h-full p-4 rounded-md aspect-[1/1] uppercase font-2xl" style="background-color:{{obj.color|lower}};">
        <div class="my-auto w-full h-full block self-center text-4xl font-black">{{obj.name|upper}}</div>
        <img src="{% if obj.get_most_popular.image.thumbnail %}{{obj.get_most_popular.image.thumbnail.url}}{% else %}{% static 'images/favicons.svg' %}{% endif %}" alt="{{obj.get_most_popuar.name|title}} image" class="z-10 h-2/4 w-2/4 object-contain rotate-45 absolute -bottom-3 -right-3 shadow-lg rounded-md">
      </div>
    {% endfor %}
  </div>
{% endif %}

<!--  -->
